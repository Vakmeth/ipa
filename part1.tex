\part[Ablauf, Organisation und Umfeld]{Ablauf, Organisation und Umfeld
    }

\tableofcontents

\chapter{Aufgabenstellung}

\section{Titel der Arbeit}
Hitobito: Neue Generation von Personen-Filtern

\section{Ausgangslage}
Hitobito ist eine Open Source Webapplikation zum Verwalten von Mitgliedern, Events und vielem mehr. Die Ruby on Rails Applikation wurde 2012 von Puzzle ITC initiiert und wird stets weiterentwickelt.

Die Basis für die Software bildet das Webframework Ruby on Rails. Für das User Interface wird neben statischer Technologie wie HTML und CSS auch JavaScript oder Hotwire verwendet. Der komplette Source-Code steht auf Github zur Verfügung: \href{https://github.com/hitobito/}{Hitobito}

Eine Kernfunktionalität von Hitobito ist das Filtern von Personenlisten und von Mailinglistenempfängern mit konfigurierbaren Filtern. Diese werden über das Webinterface konfiguriert. Das Webinterface wurde mit statischen Web technologien entwickelt und ist inzwischen ziemlich in die Jahre gekommen.

Eine Erneuerung dieser Komponente ist ein Wunsch vieler Kunden.

\newpage

\section{Detaillierte Aufgabenstellung}
Mit dieser IPA soll ein neues UI mit Hotwire für die Persistierung von Filter-Parametern im Hitobito Generic-Wagon erstellt werden (rein Frontend).

\begin{itemize}
    \item Die Ansichten zur Konfiguration für Filter der Personenlisten und Abonnemente werden mit dem neuen UI ersetzt.
    \item Die neuen Ansichten werden nach einem gegebenen Mockup umgesetzt. Dieses Mockup wurde vom Kandidaten in Zusammenarbeit mit einem UX Experten erarbeitet und muss als Grundlage für die Ausarbeitung des Interfaces verwendet werden. Des weiteren muss das Interface auf das visuelle Design der existierenden Applikation abgestimmt sein.
    \item Das Backend darf nicht angepasst werden, das heisst das neue Interface verwendet die bestehenden Endpunkte und schickt die Daten im selben Format wie das alte Interface. Dies muss mit automatisierten Tests sichergestellt werden.
    \item Formular zur Konfiguration von Personen-Listen Filter: Das bestehende Formular muss ersetzt werden durch eine neue Implementation mit den in Mittel und Methoden definierten Web Technologien. Diese neue Umsetzung muss es erlauben, dynamisch weitere Filterkriterien hinzuzufügen im Gegensatz zur alten Implementation welche mit einem statischen Formular implementiert ist.
    \item Formular zur Konfiguration von Abo-Empfänger Filter: Das bestehende Formular besteht aus mehrerern Teilen, wovon im Rahmen der IPA nur der Teil für die Globalen Filterbedingungen angepasst werden muss. Wie bei den Personen-Listen Filter muss das Formular nun dynamisch implementiert werden. Die Formulare für die weiteren Filterbedingungen werden im Rahmen der IPA nicht angepasst. 
    \item Code der während dieser IPA entsteht soll auf ein privates Github Repo gepushed werden. Die VFs haben dabei stets Lese-Rechte.
    \item Die Konventionen des Ruby Style Guide, des Rails Style Guide und für Git Commit Messages müssen eingehalten werden (siehe Mittel und Methoden).
\end{itemize}

\newpage

Out of Scope - wird erst nach der IPA umgesetzt:

\begin{itemize}
    \item Filterung für Rollen, Gruppen, Events, People bei Abonnementen.
    \item Anpassungen der Ansicht in den anderen Wagons.
    \item Anpassungen der bisher bestehenden Tests in Hitobito welche die zu erweiternden Ansichten betreffen.
\end{itemize}

Weitere Anforderungen zu spezifischen Bewertunskriterien: 

\begin{itemize}
    \item G1: Dokumentation fachlicher und technischer Anforderungen: Die fachlichen und technischen Anforderungen müssen dokumentiert werden.
    \item G10: Konforme Implementierung und Versionierung: Applikationen und Schnittstellen müssen konform implementiert und versioniert werden.
    \item A13: Erhebung und Dokumentation der Bedürfnisse und Umfeld: Die Bedürfnisse und das Umfeld werden adäquat erhoben und dokumentiert.
    \item A15: Instruktion: Es wird für den Projektowner eine Instruktion durchgeführt. Diese muss dem Projektowner die relevanten Änderungen aufzeigen.
    \item C11: Einsatz von KI-Modellen: Wir setzen bei Puzzle KI in Form von Kopiloten und Chatbots als Hilfsmittel ein. Die Lernenden werden im sinnvollen Einsatz von solcher KI geschult. Dies umfasst z.B. den Umgang in Bezug auf Output Validierung, Transparenz und Sicherheit. Die IPA soll möglichst repräsentativ für unseren Alltag als Entwickler sein, dementsprechen darf KI ein Teil davon sein.
    \item G5: Risikoanalyse und Sicherheitsmassnahme: Sicherheitsrisiken von Applikationen und Schnittstellen müssen identifiziert und adressiert werden.
    \item G6: Entwicklung und Anpassung des Anforderungskatalogs: Ein Anforderungskatalog für Sicherheitsmassnahmen von Applikationen und/oder Schnittstellen muss erstellt oder angepasst werden.
    \item User Experience und visuelles Design: Das Feature muss visuell gut gestaltet sein um die Usability und Nutzerfreundlichkeit des Features sicherzustellen. 
    \item Versionsverwaltung mit Git (Source Code): Die Versionsverwaltung mit Git muss gemäss den Best Practices erfolgen. Es müssen sprechende und einheitliche Commit-Messages geschrieben werden und commit-spezifische Inhalte müssen passend zur Message sein und unter der Einhaltung der Firmenguidelines erfolgen. 
    \item Bewertung von Aussagen: Aussagen in der Arbeit müssen klar zwischen persönlichen Meinungen und auf Quellen basierenden Informationen differenziert werden.
\end{itemize}

\subsection{Mittel und Methoden}
Technologie und Plattform:

\begin{itemize}
    \item Ruby, Ruby on Rails, Active Record
    \item HTML, CSS, Javascript, Hotwire
    \item PostgreSQL
    \item Git
\end{itemize}

Entwicklungsumgebungen:

\begin{itemize}
    \item Intellij
    \item Visual Studio Code
    \item Github
    \item Rake
    \item Rubocop
\end{itemize}

Textverarbeitung und Diagramme

\begin{itemize}
    \item Latex
    \item draw.io
\end{itemize}

\subsection{Vorkenntnisse}
Marc arbeitet bereits seit einigen Monaten an Features von Hitobito. Ausserdem hat er bereits seit dem 2. Lehrjahr Erfahrung auch in anderen Ruby on Rails Projekten gesammelt.

\subsection{Vorarbeiten}
\begin{itemize}
    \item Vorbereitung Dokumentvorlage
    \item Probe-IPA: Vereinheitlichung der Personenlisten- und Abonnementenfilterlogik im Backend
    \item Entwurf eines Mockups
\end{itemize}

\subsection{Neue Lerninhalte}
\begin{itemize}
    \item Eigenständiges Umsetzen eines Designs nach gegebenem Mockup
    \item Eigenständiges Projektmanagement während der IPA
\end{itemize}

\subsection{Arbeiten in den letzten 6 Monaten}
\begin{itemize}
    \item Umsetzung diverser Features und Bugfixes für Hitobito (Ruby on Rails)
    \item Probe-IPA: Vereinheitlichung der Personenlisten- und Abonnementenfilterlogik
    \item PostgreSQL Migration Hitobito
    \item Ruby on Rails Major Upgrade Hitobito
\end{itemize}

\chapter{Firmenstandards}

\section{Code conventions}
Als Code convention werden die Ruby \href{https://github.com/rubocop/ruby-style-guide}{Style Guides} verwendet. 
Die Überprüfung dieser Style Guidelines wird mit Rubocop (Formatter) sichergestellt. Die Konfiguration
dieses Formatters ist unter \href{https://github.com/hitobito/hitobito/blob/master/.rubocop.yml}{rubocop.yml} ersichtlich.

\subsection{Mehrsprachigkeit}
Hitobito ist eine mehrsprachige Applikation. Alle Erweiterungen oder Anpassungen müssen
in Deutsch übersetzt werden. Übersetzungen werden in einer Übersetzungsdatei gespeichert oder können
vom Kunden in einem Tool namens Transifex verwaltet werden.

\subsection{Lizenz}
Hitobito ist ein Open Source Projekt.
In jedem File in Hitobito wird das Copyright für den jeweiligen Kunden in Kommentarform beschrieben. 
Diese Lizenz- und Kundeninformationen können über folgenden Befehl 
eingefügt werden:

\begin{verbatim}
    rake license:insert
\end{verbatim}

Die daraus entstehende Lizenz sieht wie folgt aus:

\begin{lstlisting}[language=Ruby]
    # Copyright (c) 2012 -2021 , hitobito AG . This file is part of
    # hitobito and licensed under the Affero General Public License version 3
    # or later . See the COPYING file at the top - level directory or at
    # https :// github . com / hitobito / hitobito .
\end{lstlisting}

\newpage

Alternativ dazu können diese Informationen mit 

\begin{verbatim}
    rake license:remove 
\end{verbatim}

entfernt oder mit 

\begin{verbatim}
    rake license:update 
\end{verbatim} aktualisiert werden.

\section{Git Commit Message Conventions}
Die Git Commit Messages werden nach den Regeln von Puzzle ITC formuliert. Im Anhang
unter \hyperref[sec:gitconv]{Git Commit Message Concention} finden sie eine Kopie der Firmenkonventionen. Diese wurden 
basierend auf folgendem Tutorial definiert: \href{https://cbea.ms/git-commit}{Tutorial}

\begin{itemize}
    \item Sprache: Englisch
    \item Kurze und prägnante Message, idealerweise unter 50 Zeichen
    \item Mit Grossbuchstaben beginnen
    \item Kein Punkt am Schluss
    \item Den \textit{imperative mood} (Befehlsform) verwenden, also «Fix bug with X» statt «Fixed bug with X» oder «More fixes for broken stuff»
    \item Wenn vorhanden Ticket referenzieren:
    \begin{itemize}
        \item Bei Open Project Work Packages: «Add X, refs \#12345»
        \item Bei Gitlab/Github Issues: «Add X \#12345»
    \end{itemize}
\end{itemize}

\chapter{IPA-Schutzbedarfanalyse}

\section{Datensicherheit}

\section{Applikationssicherheit}

\chapter{Organisation der IPA-Ergebnisse}

\section{Datensicherung}

\subsection{Dokumentation}

\subsection{Code}

\subsection{Wiederherstellung des Codes}

\chapter{Projektmethode}
Die verwendete Projektmethode dieser IPA ist Scrum. Im folgenden Abschnitt wird der Einsatz, Abweichungen, Werkzeuge und Begründung der Wahl
dieser Projektmethode beschrieben. Des weiteren beschreibt dieser Abschnitt die Definition of Done (DoD).

\section{Einsatz von Scrum}

\subsection{Sprints}
Die IPA wird insgesamt in drei Sprints unterteilt. Jedem Sprint wird eine Phase der Arbeit zugewiesen. Die Aufteilung ist wie folgt:

\begin{itemize}
    \item Sprint 1: Initialisierung
    \item Sprint 2: Umsetzung
    \item Sprint 3: Finalisierung
\end{itemize}

\subsection{Verwaltungstool}
Als Verwaltungstool wird Github Projects eingesetzt. Das Board hierzu kann unter \href{https://github.com/users/Vakmeth/projects/3/views/1}{Github Board}
aufgerufen werden. Das Board ist in sechs Spalten unterteilt: 

\begin{itemize}
    \item Backlog: User-Stories werden grob erfasst, keine Details nötig.
    \item Refinement: User-Stories werden genauer Beschrieben und Akzeptanzkriterien werden definiert.
    \item Ready: User-Story wurde refined und geschätzt. Sie kann jetzt bearbeitet werden.
    \item In-Progress: User-Story wird momentan bearbeitet.
    \item In-Review: User-Story wurde abgeschlossen, alle Akzeptanzkriterien sind erfüllt.
    \item Done: User-Story erfüllt DoD (Definition of Done).
\end{itemize}

\begin{figure}[h]
    \centering
    \fbox{\includegraphics[width=1\textwidth,]{github_projects_board.png}}
    \caption{Github Projects Board}
\end{figure}

\subsection{Meetings}
\textbf{Sprint Planning}

Zu Beginn eines Sprints werden werden alle Aufgaben in Form von User-Stories im Backlog erfasst.
Die Stories werden anschliessend refined und danach geschätzt. Das Sprint Planning umfasst den Prozess der Erfassung
von User-Stories, deren Refinement und Schätzung. Konnten im letzten Sprint die geplanten User-Stories nicht alle abgeschlossen werden,
umfasst das Planning zusätzlich das Neurefinement und die Neuschätzung dieser User-Stories. Anwesend beim Sprint Planning ist auschliesslich
der Kandidat.

\textbf{Dailies}

Während eines Sprints wird jeden Tag um 09:00 Uhr ein Daily durchgeführt. Das Daily findet bei Puzzle ITC
im Sitzungszimmer "Sudo" statt. Anwesend sind dabei der Kandidat, die verantwortliche Fachkraft und die zusätzliche verantwortliche
Fachkraft. Ausgenommen von dieser Regel ist der erste Tag der IPA (04.03.2025) an welchem kein Daily durchgeführt wird. Grund dafür ist, dass zu diesem Zeitpunkt noch keine
Organisation und Projektvorgehensweise definiert wurde und die ersten Prozesse von Scrum erst ab dem 2. Tag eintreffen können.

Im Daily ist es dem Kandidat möglich, Fragen an seine verantwortlichen Fachkräfte zu stellen. Jedes Daily wird protokoliert. 
Die Protokolle der Dailies können unter \hyperref[sec:dailyprot]{Daily-Protokolle} eingesehen werden.

\textbf{Sprintabschlüsse}
\label{sprintfinish}

Nach jedem Sprint findet ein einstündiges Meeting für den Sprintabschluss statt. Darin werden die abgeschlossenen User-Stories
in der In-Review-Spalte verifiziert. Erfüllt die hinterlegte Arbeit alle Akzeptanzkriterien wird die User-Story auf Done geschoben. 
Sind die Akzeptanzkriterien nicht erfüllt, wird die User-Story auf Refinement geschoben. Anwesend beim Sprintabschluss ist auschliesslich der Kandidat.
In Folge des Sprintabschlusses wird das Sprint Planning durchgeführt.

\subsection{Abweichungen}
Trotz der Verwendung von Scrum, wurden Änderungen an der Definition dieser Projektvorgehensmethode
vorgenommen. Grund dafür ist, dass Scrum durch die Änderungen besser auf die IPA zugeschnitten ist.

\textbf{Schätzung}

Scrum verzichtet auf Schätzungen in Personenstunden und verwendet deswegen eine Währung namens "Story Points". Story Points werden
der \href{https://de.wikipedia.org/wiki/Fibonacci-Folge}{Fibonacci-Zahlenreihe} folgend vergeben. Der Sinn dabei ist, der Schätzung einer User-Story 
nach Personenstunden auszuweichen.

Dieses Konzept wird in dieser IPA verworfen, um in der Lage zu sein einen Zeitplan mit genauen Angaben in Personenstunden zu erstellen. Dies macht es dem Kandidaten
möglich besser einzuschätzen, wie gut er in der Zeit liegt.

\textbf{Abnahme Akzeptanzkriterien}

Nach Scrum werden User-Stories vom Product Owner abgenommen. Um ständige Meetings mit dem Product Owner von
Hitobito und den mithergehenden Zeitverlust zu vermeiden, werden die User-Stories vom Kandidaten selbt abgenommen. Den Prozess dazu
finden ist unter \hyperref[sec:sprintfinish]{Sprintabschlüsse} ersichtlich.

\newpage

\textbf{Sprint Retro}

Das Sprint Retro bietet dem Product Owner eine Möglichkeit einen Überlick über die Stimmung im Entwicklerteam zu erhalten. Sprint Retros finden 
im Geschäftsalltag Monatsweise statt. Auf das Sprint-Retro wird
in dieser Arbeit verzichtet. Grund ist der kleine Zeitrahmen der IPA, welcher es unnötig macht ein solches Meeting durchzuführen.

\section{Definition of Done}
\label{dod}
Die Definition of Done definiert wan eine User-Story abgeschlossen werden kann. Eine User-Story kann erst
abgeschlossen werden, wenn sie alle Kriterien der Definition of Done erfüllt. Im Rahmen der IPA werden zwei Definition of Done's verwendet.
Eine für User-Stories welche den Code betreffen, eine zweite für User-Stories welche die Dokumentation betreffen.

\subsection{DoD Code}

\begin{itemize}
    \item Nur notwendige Konsolenausgaben vorhanden
    \item Feature relevante Tests vorhanden
    \item Sprechender Code implementiert
    \item Nicht verwendete Methoden gelöscht
    \item Feature manuell getestet
    \item Alle Akzeptanzkriterien erfüllt
\end{itemize}

\subsection{DoD Dokumentation}

\begin{itemize}
    \item Definierte Sektion beschireben
    \item Kriterien aus Kriterienkatalog erfüllt
    \item Kriterien gemäss Dokumentenvorlage erfüllt
    \item Keine Grammatik- / Rechtschreibefehler vorhanden
    \item Quellen angegeben
\end{itemize}

\subsection{Akzeptanzkriterien}
Die Akzeptanzkriterien einer User-Story werden im dazugehörigen Ticket verwaltet. Jede User-Story wurde nach einem definierten Template
erstellt, welches in Github hinterlegt wurde. Eine User-Story kann folgendermassen aufgebaut sein:

\begin{figure}[h]
    \centering
    \fbox{\includegraphics[width=0.8\textwidth,]{user_story.png}}
    \caption{Example of User Story}
\end{figure}

\section{Verwendungsgrund}
Die Projektvorgehensmethode wurde so gewählt, da sie für die IPA mehrere Vorteile bringt:

\begin{itemize}
    \item \textbf{Sprint Ende:} SCRUM zwingt den Entwickler dazu am Ende des Sprints ein vorzeigbares Produkt zu haben
    \item \textbf{Agilität:} Wenn eine Story nicht erreicht wurde, kann sie in den nächsten Sprint gezogen werden
    \item \textbf{Daily:} Durch die Dailies wird ein täglicher Austausch zwischen Fachkraft und Kandidat sichergestellt
    \item \textbf{Akzeptanzkriterien:} Mit den Kriterien verhindern wir das abschliessen von halbfertigen Features oder fehlerhafter Software
    \item \textbf{Board:} Durch das Github Projects Board ermöglichen wir eine schnelle Übersicht über den Stand der IPA
\end{itemize}

\chapter{Projektaufbauorganisation}

\section{Projektrollen Scrum}

\begin{figure}[h]
    \centering
    \includegraphics[width=1\textwidth,]{scrum_roles_ipa.png}
    \caption{Rollen in Scrum, selbstgezeichnet mit Draw.io}
\end{figure}

\begin{table}[h!]
    \begin{tabular}{|L{0.4\textwidth}|L{0.5\textwidth}|}
        \hline
        \rowcolor{puzzleblue} \multicolumn{2}{|l|}{\color{white}\textbf{Rollenbeschreibung}} \\[12pt]
        \hline
        Product Owner & Der Product Owner vertritt die Interessen des Kunden. Er priorisiert die Aufgaben im Product Backlog  \\
        \hline
        Scrum Master & Der Scrum Master unterstützt die Entwickler und beseitigt Hindernisse. Er sorgt für eine 
        kontinuierliche Verbesserung in der Arbeit. \\
        \hline
        Entwicklerteam & Das Entwicklerteam arbeitet selbstorganisiert den Sprint Backlog ab. 
        Durch Dailies wird ein laufender Informationsaustausch sichergestellt. \\
        \hline
      \end{tabular}
      \caption{Rollenbeschreibung}
\end{table}

\section{Projektrollen IPA}
\begin{table}[h!]
    \begin{tabular}{|L{0.4\textwidth}|L{0.5\textwidth}|}
        \hline
        \rowcolor{puzzleblue} \multicolumn{2}{|l|}{\color{white}\textbf{Rollenbeschreibung}} \\[12pt]
        \hline
        Verantwortliche Fachkraft & Unterstützt den Kandidaten von seiten des Lehrbetriebes. Erste Anlaufstelle bei Problemen.  \\
        \hline
        Zusätzliche verantwortliche Fachkraft & Unterstützung für die verantwortliche Fachkraft \\
        \hline
        Experten & \textbf{Validierungsexperte:} Validiert die IPA-Aufgabenstellung.
                    \textbf{Hauptexperte:} Verantwortlich für die Bewertung der IPA.
                    \textbf{Nebenexperte:} Unterstützung für den Hauptexperten. \\ 
        \hline
      \end{tabular}
      \caption{Rollenbeschreibung}
\end{table}

\newpage

\section{Projektrollen Scrum in der IPA}

\begin{figure}[h]
    \centering
    \includegraphics[width=1\textwidth,]{scrum_roles_division.png}
    \caption{Rollenverteilung in der IPA, selbstgezeichnet mit Draw.io}
\end{figure}

\begin{table}[h!]
    \begin{tabular}{|L{0.4\textwidth}|L{0.5\textwidth}|}
        \hline
        \rowcolor{puzzleblue} \multicolumn{2}{|l|}{\color{white}\textbf{Rollenbeschreibung IPA}} \\[12pt]
        \hline
        Verantwortliche Fachkraft & Daniel Illi  \\
        \hline
        Zusätzliche verantwortliche Fachkraft & Robin Steiner \\
        \hline
        Validierungsexperte & Lawson Mike \\ 
        \hline
        Hauptexperte & Lorenz Hess \\ 
        \hline
        Nebenexperte & Michael Moser \\ 
        \hline
        Scrum Master & Marc Egli \\ 
        \hline
        Development Team & Marc Egli \\ 
        \hline
        Kandidat & Marc Egli \\ 
        \hline
      \end{tabular}
      \caption{Rollenbeschreibung IPA}
\end{table}

\input{zeitplan.tex}

\chapter{Arbeitsjournale}
\input{journal/tag1.tex}
\input{journal/tag2.tex}
\input{journal/tag3.tex}
\input{journal/tag4.tex}
\input{journal/tag5.tex}
\input{journal/tag6.tex}
\input{journal/tag7.tex}
\input{journal/tag8.tex}
\input{journal/tag9.tex}
\input{journal/tag10.tex}
\input{journal/tag11.tex}
\input{journal/tag12.tex}

\chapter{Persönliches Fazit}

\section{Was lief weniger gut}

\section{Was lief gut}

\section{Schlussreflexion}